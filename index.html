<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch</title>
</head>
<body>
    
    <table>
        <th>Information</th><th>Data</th>
        <tbody>
            <tr>
                <td>Name: </td> <td id="name"></td>
            </tr>
            <tr>
                <td>Gerburtsdatum: </td> <td id="birthday"></td>
            </tr>
            <tr>
                <td>Ort: </td> <td id="location"></td>
            </tr>
            <tr>
                <td>E-Mail: </td> <td id="mail"></td>
            </tr>
            <tr>
                <td>Job: </td> <td id="job"></td>
            </tr>
            <tr>
                <td>Berüßung des Mitarbeiters</td> <td><input type="checkbox" id="cl0"></input></td>
            </tr>
            <tr>
                <td>Arbeitsmittel eingereicht</td> <td><input type="checkbox" id="cl1"></input></td>
            </tr>
            <tr>
                <td>Am erste Meetiung teilgenommen</td> <td><input type="checkbox" id="cl2"></input></td>
            </tr>
            <tr>
                <td>Onboarding-Prozess abgeschlosen</td> <td><input type="checkbox" id="cl3"></input></td>
            </tr>
        </tbody>
    </table>
    <br><br>
    <form action="">
        <input type="text" name="" id="textfield">
        <input type="button" value="Submit" id="btn">
    </form>
    

    <script>
        fetch('http://localhost:8000/user')
        .then((response) => {
            return response.json()
        })
        .then((data) => {
            document.getElementById('name').innerHTML = data.name
            document.getElementById('birthday').innerHTML = data.birthdate
            document.getElementById('location').innerHTML = data.location
            document.getElementById('mail').innerHTML = data.email
            document.getElementById('job').innerHTML = data.job

            for (let i = 0; i < data.checklist.length; i++) {
                if(data.checklist[i].isDone == true) {     
                    document.getElementById('cl' + i).checked = true;
                } else {
                    document.getElementById('cl' + i).checked = false;
                }
            }
        })

        document.getElementById('btn').addEventListener("click", function() {
            const data = {input : document.getElementById('textfield').value}

            fetch('http://localhost:8000/user', {
                method : 'POST',
                body: JSON.stringify(data),
                headers: {
                'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(response => console.log(response))
        })
        

        
    </script>
</body>
</html>